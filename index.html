<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>RideWallah – Bike Rentals</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f4f6f9;
  margin: 0;
}

header {
  background: #0d47a1;
  color: white;
  padding: 15px;
  display: flex;
  justify-content: space-between;
}

header a {
  color: white;
  margin-left: 15px;
  text-decoration: none;
}

.container {
  max-width: 1100px;
  margin: auto;
  padding: 20px;
}

.bikes {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
}

.bike-card {
  background: white;
  border-radius: 8px;
  box-shadow: 0 2px 10px rgba(0,0,0,.1);
  padding: 15px;
  text-align: center;
}

.bike-card img {
  width: 100%;
  border-radius: 6px;
}

button {
  background: #0d47a1;
  color: white;
  border: none;
  padding: 10px;
  border-radius: 6px;
  cursor: pointer;
}

form {
  background: white;
  padding: 20px;
  border-radius: 8px;
  margin-top: 30px;
}

input, textarea {
  width: 100%;
  padding: 10px;
  margin: 8px 0;
}
</style>
</head>

<body>

<header>
  <h2>RideWallah</h2>
  <nav>
    <a href="#bikes">Bikes</a>
    <a href="#book">Book</a>
  </nav>
</header>

<div class="container">

<h2 id="bikes">Choose Your Bike</h2>

<div class="bikes">
  <div class="bike-card">
    <img src="https://images.unsplash.com/photo-1593779198777-f29f04c6ec68">
    <h3>Royal Enfield Classic 350</h3>
    <button onclick="selectBike('Royal Enfield Classic 350')">Book Now</button>
  </div>

  <div class="bike-card">
    <img src="https://images.unsplash.com/photo-1601924638867-3ec62b6b1c38">
    <h3>TVS Jupiter</h3>
    <button onclick="selectBike('TVS Jupiter')">Book Now</button>
  </div>
</div>

<h2 id="book">Book a Bike</h2>

<form id="bookingForm">
  <input id="bike" readonly required>

  <label>Pickup Date & Time</label>
  <input type="datetime-local" id="pickup" required>

  <label>Drop Date & Time</label>
  <input type="datetime-local" id="drop_time" required>

  <input placeholder="Your Name" id="name" required>
  <input placeholder="Phone" id="phone" required>
  <input placeholder="Email" id="email">
  <input placeholder="Pickup Location" id="pickup_location" required>
  <textarea placeholder="Message" id="message"></textarea>

  <button type="submit">Send Booking</button>
  <p id="msg"></p>
</form>

</div>

<script>
function selectBike(name) {
  document.getElementById("bike").value = name;
  location.href = "#book";
}

document.getElementById("bookingForm").addEventListener("submit", function(e) {
  e.preventDefault();

  fetch("https://rahulmishra.pythonanywhere.com/api/booking", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify({
      bike: bike.value,
      pickup: pickup.value,
      drop_time: drop_time.value,
      name: name.value,
      phone: phone.value,
      email: email.value,
      pickup_location: pickup_location.value,
      message: message.value
    })
  })
  .then(r => r.json())
  .then(d => {
    if(d.status === "success"){
      msg.innerText = "✅ Booking successful!";
      bookingForm.reset();
    } else {
      msg.innerText = "❌ " + d.message;
    }
  })
  .catch(() => msg.innerText = "❌ Server error");
});
</script>

</body>
</html>
